<!DOCTYPE html>
<html lang="en">
<head>
  <!-- DEPLOYMENT TEST: CSP FIX APPLIED 2025-08-21 -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NXTRIX CRM ‚Ä¢ AI-Powered Real Estate Investment Platform</title>
  <meta name="description" content="The most advanced CRM for real estate investors. AI deal analysis, automated investor matching, and workflow automation. Get founders pricing now!">
  
  <!-- Supabase for user data persistence -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  
  <!-- Configuration for environment-aware URLs -->
  <script src="./config.js"></script>
  
  <!-- EmailJS for notifications -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  
  <style>
    :root{
      --bg:#0b0d12; --surface:#1a1b23; --border:rgba(255,255,255,.08); --text:#e5e7eb; --muted:#9ca3af; --brand:#7c5cff; --brand-2:#24d1ff; --accent:#10b981; --warning:#f59e0b; --error:#ef4444;
    }
    *{box-sizing:border-box; margin:0; padding:0}
    body{font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif; background:var(--bg); color:var(--text); line-height:1.6; overflow-x:hidden}
    .container{max-width:1200px; margin:0 auto; padding:0 20px}
    h1,h2,h3,h4{font-weight:700; line-height:1.2; margin-bottom:12px}
    h1{font-size:2.5rem; background:linear-gradient(135deg,var(--brand),var(--brand-2)); -webkit-background-clip:text; -webkit-text-fill-color:transparent}
    h2{font-size:2rem; color:var(--text)}
    h3{font-size:1.5rem; color:var(--text)}
    h4{font-size:1.25rem; color:var(--text)}
    p{margin-bottom:16px; color:var(--muted)}
    .muted{color:var(--muted); font-size:0.9rem}
    .notice{font-size:0.85rem; color:var(--muted)}
    
    /* Header */
    header{padding:20px 0; border-bottom:1px solid var(--border); position:sticky; top:0; background:rgba(11,13,18,0.95); backdrop-filter:blur(10px); z-index:100}
    nav{display:flex; justify-content:space-between; align-items:center}
    .logo{font-size:1.5rem; font-weight:800; background:linear-gradient(135deg,var(--brand),var(--brand-2)); -webkit-background-clip:text; -webkit-text-fill-color:transparent}
    .nav-links{display:flex; gap:32px; list-style:none}
    .nav-links a{color:var(--muted); text-decoration:none; font-weight:500; transition:color 0.2s}
    .nav-links a:hover{color:var(--text)}
    
    /* Buttons */
    .btn{padding:12px 24px; border:none; border-radius:8px; font-weight:600; cursor:pointer; transition:all 0.2s; text-decoration:none; display:inline-block; text-align:center}
    .btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand-2)); color:white}
    .btn.primary:hover{transform:translateY(-2px); box-shadow:0 8px 25px rgba(124,92,255,0.4)}
    .btn.secondary{background:var(--surface); color:var(--text); border:1px solid var(--border)}
    .btn.secondary:hover{background:var(--border)}
    .btn.choose{background:linear-gradient(135deg,var(--brand),var(--brand-2)); color:white; width:100%; margin-top:16px}
    .btn.choose:hover{transform:translateY(-1px)}
    
    /* Hero */
    .hero{padding:80px 0; text-align:center; background:radial-gradient(circle at 50% 20%, rgba(124,92,255,0.1), transparent 70%)}
    .hero h1{font-size:3.5rem; margin-bottom:24px}
    .hero p{font-size:1.25rem; margin-bottom:32px; max-width:600px; margin-left:auto; margin-right:auto}
    .hero-buttons{display:flex; gap:16px; justify-content:center; flex-wrap:wrap}
    
    /* Pills */
    .pill{background:rgba(124,92,255,0.1); color:var(--brand); padding:4px 12px; border-radius:999px; font-size:0.8rem; font-weight:600; margin-bottom:16px; display:inline-block}
    
    /* Grid */
    .grid-2{display:grid; grid-template-columns:1fr 1fr; gap:32px; margin:40px 0}
    .grid-3{display:grid; grid-template-columns:repeat(3,1fr); gap:24px; margin:40px 0}
    .card{background:var(--surface); border:1px solid var(--border); border-radius:12px; padding:24px; transition:transform 0.2s}
    .card:hover{transform:translateY(-4px)}
    
    /* Form */
    .waitlist-form{background:var(--surface); border:1px solid var(--border); border-radius:16px; padding:32px; max-width:500px; margin:0 auto}
    .form-grid{display:grid; grid-template-columns:1fr 1fr; gap:16px}
    .full{grid-column:span 2}
    label{display:block; margin-bottom:6px; font-weight:500; color:var(--text)}
    input,select,textarea{width:100%; padding:12px; background:var(--bg); border:1px solid var(--border); border-radius:8px; color:var(--text); font-size:14px}
    input:focus,select:focus,textarea:focus{outline:none; border-color:var(--brand); box-shadow: 0 0 0 2px rgba(124,92,255,0.1)}
    
    /* Founders Form Specific Styles */
    .founders-form-container {
      background: linear-gradient(135deg, rgba(124,92,255,0.05), rgba(36,209,255,0.05));
      border: 1px solid rgba(124,92,255,0.2);
      border-radius: 16px;
      padding: 40px;
      position: relative;
      overflow: hidden;
    }
    .founders-form-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--brand), var(--brand-2));
    }
    .form-field {
      margin-bottom: 24px;
      position: relative;
    }
    .form-field input:focus + label,
    .form-field input:not(:placeholder-shown) + label {
      transform: translateY(-8px);
      font-size: 12px;
      color: var(--brand);
    }
    
    /* Enhanced Signup Styles */
    .enhanced-signup{max-width:800px; margin:0 auto; text-align:left}
    .steps-indicator{display:flex; justify-content:center; gap:20px; margin-bottom:40px}
    .step{display:flex; flex-direction:column; align-items:center; opacity:0.5; transition:opacity 0.3s}
    .step.active{opacity:1}
    .step-number{width:40px; height:40px; background:var(--surface); border:2px solid var(--border); border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:bold; margin-bottom:8px}
    .step.active .step-number{background:var(--brand); border-color:var(--brand); color:white}
    .step-label{font-size:0.9rem; color:var(--muted)}
    
    .billing-toggle{display:flex; justify-content:center; gap:0}
    .billing-btn{padding:12px 24px; border:1px solid var(--border); background:var(--surface); color:var(--muted); cursor:pointer; transition:all 0.2s; position:relative}
    .billing-btn:first-child{border-radius:8px 0 0 8px}
    .billing-btn:last-child{border-radius:0 8px 8px 0; border-left:none}
    .billing-btn.active{background:var(--brand); color:white; border-color:var(--brand)}
    .savings-badge{background:var(--accent); color:white; padding:2px 6px; border-radius:4px; font-size:0.7rem; margin-left:8px}
    
    .mini-plans{display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:16px; margin-bottom:40px}
    .mini-plan{background:var(--surface); border:2px solid var(--border); border-radius:12px; padding:20px; cursor:pointer; transition:all 0.3s; position:relative}
    .mini-plan:hover,.mini-plan.selected{border-color:var(--brand); transform:translateY(-2px)}
    .mini-plan.featured{border-color:var(--brand-2)}
    .popular-badge{position:absolute; top:-10px; left:50%; transform:translateX(-50%); background:var(--brand-2); color:white; padding:4px 12px; border-radius:12px; font-size:0.7rem; font-weight:bold}
    .plan-header h4{margin:0 0 8px; color:var(--text)}
    .price{font-size:1.5rem; font-weight:bold; color:var(--brand); margin-bottom:8px}
    .price small{font-size:0.8rem; color:var(--muted)}
    .savings-display{margin-bottom:12px; text-align:center}
    .plan-features{display:flex; flex-direction:column; gap:4px}
    .plan-features span{font-size:0.8rem; color:var(--muted)}
    
    .form-section{margin-bottom:40px}
    .secure-btn{width:100%; padding:20px; font-size:1.1rem; position:relative; overflow:hidden}
    .btn-text{display:block; font-weight:bold}
    .btn-subtext{display:block; font-size:0.9rem; opacity:0.9; margin-top:4px}
    
    .trust-signals{display:flex; justify-content:center; gap:24px; margin-top:16px; flex-wrap:wrap}
    .trust-item{display:flex; align-items:center; gap:8px; font-size:0.8rem; color:var(--muted)}
    
    @media (max-width: 768px) {
      .steps-indicator{gap:10px}
      .step-number{width:30px; height:30px; font-size:0.8rem}
      .step-label{font-size:0.7rem}
      .mini-plans{grid-template-columns:1fr}
      .trust-signals{gap:16px}
      .trust-item{font-size:0.7rem}
    }
    
    /* Pricing */
    .pricing{margin:80px auto}
    .toggle{display:inline-flex; background:#0f1320; border:1px solid var(--border); border-radius:999px; padding:6px; gap:6px}
    .toggle button{background:transparent; border:0; color:var(--muted); padding:8px 14px; border-radius:999px; cursor:pointer; transition:all 0.2s ease}
    .toggle button.active{background:linear-gradient(135deg,var(--brand),var(--brand-2)); color:#0b0d12; font-weight:700}
    .toggle button:hover:not(.active){background:rgba(124,92,255,0.1); color:#fff}
    .plans{display:grid; grid-template-columns:repeat(3,1fr); gap:24px; margin-top:24px}
    .plan{background:var(--surface); border:1px solid var(--border); border-radius:16px; padding:32px; position:relative; transition:all 0.3s}
    .plan:hover{transform:translateY(-8px); border-color:rgba(124,92,255,0.3)}
    .badge{position:absolute; top:-12px; left:50%; transform:translateX(-50%); background:linear-gradient(135deg,var(--accent),#22c55e); color:white; padding:6px 16px; border-radius:999px; font-size:0.8rem; font-weight:600}
    .price{font-size:2.5rem; font-weight:800; color:var(--text); margin:16px 0}
    .price small{font-size:1rem; color:var(--muted); font-weight:400}
    .plan ul{list-style:none; margin:24px 0}
    .plan li{display:flex; align-items:center; margin:8px 0; font-size:0.9rem}
    .ok{width:16px; height:16px; background:var(--accent); border-radius:50%; margin-right:12px; display:flex; align-items:center; justify-content:center; font-size:10px}
    .ok::after{content:'‚úì'; color:white; font-weight:bold}
    .limited{width:16px; height:16px; background:var(--warning); border-radius:50%; margin-right:12px; display:flex; align-items:center; justify-content:center; font-size:10px}
    .limited::after{content:'~'; color:white; font-weight:bold}
    .no{width:16px; height:16px; background:var(--error); border-radius:50%; margin-right:12px; display:flex; align-items:center; justify-content:center; font-size:10px}
    .no::after{content:'‚úó'; color:white; font-weight:bold}
    
    /* Footer */
    footer{padding:40px 0; border-top:1px solid var(--border); text-align:center; color:var(--muted)}
    footer a{color:var(--brand); text-decoration:none}
    
    /* Sticky Notification */
    .sticky-notification{position:fixed; bottom:20px; right:20px; background:linear-gradient(135deg,var(--brand),var(--brand-2)); color:white; padding:16px 20px; border-radius:12px; box-shadow:0 8px 32px rgba(124,92,255,0.3); z-index:1000; max-width:300px; transform:translateX(400px); transition:transform 0.3s ease}
    .sticky-notification.show{transform:translateX(0)}
    .sticky-notification .close{position:absolute; top:8px; right:12px; color:white; cursor:pointer; font-size:18px; line-height:1}
    .sticky-notification h4{margin:0 0 8px; font-size:0.9rem}
    .sticky-notification p{margin:0; font-size:0.8rem; opacity:0.9}
    
    /* Responsive */
    @media (max-width: 768px) {
      .hero h1{font-size:2.5rem}
      .grid-2,.grid-3,.plans{grid-template-columns:1fr}
      .form-grid{grid-template-columns:1fr}
      .full{grid-column:span 1}
      .hero-buttons{flex-direction:column; align-items:center}
      nav{flex-direction:column; gap:16px}
      .nav-links{gap:16px}
      .toggle-group{flex-direction:column; gap:8px}
    }
  </style>
</head>
<body>
  <header>
    <nav class="container">
      <div class="logo">NXTRIX</div>
      <ul class="nav-links">
        <li><a href="#features">Features</a></li>
        <li><a href="#pricing">Pricing</a></li>
      </ul>
    </nav>
  </header>

  <section class="hero">
    <div class="container">
      <span class="pill">Pre-Launch ‚Ä¢ Founders Pricing Available</span>
      <h1>AI-Powered Real Estate Investment CRM</h1>
      <p>The most advanced platform for real estate investors. Automated deal analysis, intelligent investor matching, and workflow automation that scales your business.</p>
      <div class="hero-buttons">
        <a href="#pricing" class="btn primary" onclick="document.getElementById('pricing').scrollIntoView({behavior: 'smooth'}); return false;">Reserve My Spot</a>
        <a href="#features" class="btn secondary">Explore Features</a>
      </div>
      
      <div style="margin-top:48px; display:flex; justify-content:center; align-items:center; gap:32px; flex-wrap:wrap; opacity:0.7">
        <div style="display:flex; align-items:center; gap:8px">
          <span style="color:var(--accent)">üîí</span>
          <span style="font-size:0.9rem; color:var(--muted)">SSL Secured</span>
        </div>
        <div style="display:flex; align-items:center; gap:8px">
          <span style="color:var(--accent)">üõ°Ô∏è</span>
          <span style="font-size:0.9rem; color:var(--muted)">GDPR Compliant</span>
        </div>
        <div style="display:flex; align-items:center; gap:8px">
          <span style="color:var(--accent)">üí≥</span>
          <span style="font-size:0.9rem; color:var(--muted)">Stripe Payments</span>
        </div>
        <div style="display:flex; align-items:center; gap:8px">
          <span style="color:var(--accent)">‚òÅÔ∏è</span>
          <span style="font-size:0.9rem; color:var(--muted)">Cloud Hosted</span>
        </div>
      </div>
    </div>
  </section>

  <section id="features" class="container" style="margin:80px auto;">
    <div style="text-align:center; margin-bottom:48px">
      <h2>Built for Real Estate Investors</h2>
      <p class="muted">Everything you need to find, analyze, and close more deals</p>
    </div>
    
    <div class="grid-3">
      <div class="card">
        <h4>ü§ñ AI Deal Analysis</h4>
        <p class="muted">Instant ROI calculations, risk assessment, and investment strategy recommendations powered by advanced AI.</p>
      </div>
      <div class="card">
        <h4>üéØ Smart Investor Matching</h4>
        <p class="muted">AI matches your deals with qualified investors based on their criteria, location, and buying history.</p>
      </div>
      <div class="card">
        <h4>üìä Advanced Analytics</h4>
        <p class="muted">Real-time dashboards, deal pipeline tracking, and performance insights to optimize your business.</p>
      </div>
      <div class="card">
        <h4>‚ö° Workflow Automation</h4>
        <p class="muted">Automate follow-ups, lead nurturing, and deal progression with intelligent triggers and sequences.</p>
      </div>
      <div class="card">
        <h4>üìß AI Communication</h4>
        <p class="muted">Generate professional emails, SMS campaigns, and marketing materials with AI-powered templates.</p>
      </div>
      <div class="card">
        <h4>üì± Mobile Optimized</h4>
        <p class="muted">Full-featured mobile experience with offline capabilities and real-time sync across devices.</p>
      </div>
    </div>
  </section>

  <section id="waitlist" class="container" style="margin:80px auto; text-align:center">
    <h2 style="margin-bottom:16px">üöÄ Secure Your Founders Pricing Now</h2>
    <p class="muted" style="margin-bottom:32px; max-width:500px; margin-left:auto; margin-right:auto">Skip the waitlist! <strong style="color:var(--warning)">Secure your spot instantly</strong> with immediate payment and get lifetime founders rates before our public launch.</p>
    
    <div class="enhanced-signup">
      <!-- Step Indicator -->
      <div class="steps-indicator" style="margin-bottom:32px">
        <div class="step active">
          <div class="step-number">1</div>
          <div class="step-label">Choose Plan</div>
        </div>
        <div class="step">
          <div class="step-number">2</div>
          <div class="step-label">Your Info</div>
        </div>
        <div class="step">
          <div class="step-number">3</div>
          <div class="step-label">Payment</div>
        </div>
        <div class="step">
          <div class="step-number">4</div>
          <div class="step-label">Access</div>
        </div>
      </div>

      <!-- Billing Toggle -->
      <div class="plan-selection" style="margin-bottom:40px">
        <div class="billing-toggle" style="margin-bottom:32px">
          <button type="button" id="monthlyPlan" class="billing-btn active" onclick="setBillingMode('monthly')">
            Founders Monthly
          </button>
          <button type="button" id="annualPlan" class="billing-btn" onclick="setBillingMode('annual')">
            Founders Annual Upfront
          </button>
        </div>
        
        <div class="billing-explanation" style="text-align:center; margin-bottom:32px; padding:20px; background:rgba(124,92,255,0.05); border:1px solid rgba(124,92,255,0.2); border-radius:12px;">
          <h4 style="margin:0 0 16px; color:var(--brand)">üî• Founders Pricing</h4>
          <div class="pricing-display">
            <div class="monthly-explanation" style="margin-bottom:12px;">
              <div style="font-size:1.5rem; font-weight:bold; color:var(--text)">
                <span id="monthlyPlanName">Team</span>: $<span id="monthlyAmount">89</span>/month
              </div>
              <small style="color:var(--muted)">Monthly billing starts at launch</small>
            </div>
            <div class="annual-explanation" style="display:none;">
              <div style="font-size:1.5rem; font-weight:bold; color:var(--text)">
                <span id="annualPlanName">Team</span>: $<span id="annualAmount">1068</span>/year
              </div>
              <small style="color:var(--muted)">One payment at launch for the full year</small>
            </div>
          </div>
          <div style="margin-top:12px; padding:8px; background:rgba(16,185,129,0.1); border-radius:6px;">
            <small style="color:var(--accent); font-weight:bold;">
              ‚è∞ No charge until public launch ‚Ä¢ Access starts on launch day ‚Ä¢ Save $<span id="savingsAmount">30</span>/month vs regular
            </small>
          </div>
        </div>
      </div>

      <!-- Founders Signup Form -->
      <form id="enhancedSignup" onsubmit="submitEnhancedSignup(event)">
        <div class="form-section">
          <h3 style="margin-bottom:8px; color:var(--text)">üöÄ Reserve Your Founders Spot</h3>
          <p style="margin-bottom:24px; color:var(--muted); font-size:0.9rem;">Lock in founders pricing ‚Ä¢ Payment setup on next step ‚Ä¢ Charged at launch</p>
          
          <div class="form-grid">
            <div>
              <label for="name">Full Name *</label>
              <input type="text" id="name" name="name" required placeholder="John Smith">
            </div>
            <div>
              <label for="email">Email Address *</label>
              <input type="email" id="email" name="email" required placeholder="john@example.com">
            </div>
          </div>
          
          <div class="form-grid">
            <div>
              <label for="company">Company Name</label>
              <input type="text" id="company" name="company" placeholder="Smith Real Estate LLC">
            </div>
            <div>
              <label for="experience">Experience Level</label>
              <select id="experience" name="experience">
                <option>New (0-1 deals)</option>
                <option>Growing (2-10 deals)</option>
                <option>Experienced (10+ deals)</option>
                <option>Professional (50+ deals)</option>
              </select>
            </div>
          </div>

          <div class="form-grid">
            <div>
              <label for="plan">Choose Your Plan *</label>
              <select id="plan" name="plan" required onchange="selectPlan(this.value)">
                <option value="solo-monthly">Solo ‚Äî $59/month (Monthly Billing)</option>
                <option value="team-monthly" selected>Team ‚Äî $89/month (Monthly Billing) - Most Popular</option>
                <option value="business-monthly">Business ‚Äî $149/month (Monthly Billing)</option>
                <option value="solo-annual">Solo ‚Äî $708/year ($59√ó12 Annual Upfront)</option>
                <option value="team-annual">Team ‚Äî $1068/year ($89√ó12 Annual Upfront)</option>
                <option value="business-annual">Business ‚Äî $1788/year ($149√ó12 Annual Upfront)</option>
              </select>
            </div>
            <div>
              <label for="type">Investor Type *</label>
              <select id="type" name="type" required>
                <option value="">Select your primary focus</option>
                <option>Wholesaler</option>
                <option>Fix & Flip</option>
                <option>Buy & Hold</option>
                <option>Commercial</option>
                <option>Syndication</option>
                <option>Multi-Family</option>
                <option>Land Development</option>
                <option>Other</option>
              </select>
            </div>
          </div>

          <div>
            <label for="notes">Goals & Notes (Optional)</label>
            <textarea id="notes" name="notes" placeholder="Tell us about your business goals, team size, or specific needs..."></textarea>
          </div>
        </div>

        <!-- Secure Checkout Button -->
        <button type="submit" class="btn primary secure-btn" id="secureCheckoutBtn">
          <span class="btn-text">üîí Continue to Payment Setup</span>
          <span class="btn-subtext">Reserve spot + setup billing for launch</span>
        </button>

        <div class="trust-signals">
          <div class="trust-item">
            <span>üîí 256-bit SSL encryption</span>
          </div>
          <div class="trust-item">
            <span>üí≥ Powered by Stripe</span>
          </div>
          <div class="trust-item">
            <span>‚ö° Instant account setup</span>
          </div>
        </div>
      </form>
    </div>
  </section>
        <p style="margin-bottom:0">4. <strong>Founders benefits</strong> - Lifetime pricing lock + priority support</p>
      </div>
    </div>
  </section>

  <section id="pricing" class="container pricing">
    <div style="margin-bottom:16px; text-align:center">
      <div style="display:inline-flex; gap:8px; align-items:center; background:rgba(255,255,255,.05); padding:8px; border-radius:12px; border:1px solid rgba(255,255,255,.1)">
        <span style="font-size:12px; color:#ff6b35; font-weight:600">üî• FOUNDERS PRICING</span>
        <span style="font-size:12px; color:#ccc">Limited spots ‚Ä¢ Up to 32% off regular price</span>
      </div>
    </div>
    
    <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap">
      <h3 style="margin:0">Pricing Plans</h3>
      <div class="toggle" role="tablist" aria-label="Pricing Toggle">
        <button id="foundersToggle" class="active" onclick="setPricing('founders')" aria-selected="true">Monthly</button>
        <button id="annualToggle" onclick="setPricing('annual')" aria-selected="false">Annual</button>
      </div>
    </div>

    <div class="plans" style="margin-top:18px">
      <!-- Solo -->
      <div class="plan">
        <div class="pill">Solo</div>
        <div class="price">
          <span class="regular-price" style="text-decoration:line-through; opacity:0.6; font-size:0.7em; display:none">$79</span>
          <span data-founders="$59" data-regular="$79" data-annual="$708">$59</span>
          <small data-monthly="/mo" data-annual="/year">/mo</small>
        </div>
        <p class="muted">Perfect for solo investors getting a taste of professional tools.</p>
        <ul>
          <li><span class="ok"></span>500 leads / month</li>
          <li><span class="ok"></span>Basic deal analysis & ROI calculator</li>
          <li><span class="ok"></span>Lead management & tracking</li>
          <li><span class="ok"></span>Basic pipeline (5 stages)</li>
          <li><span class="ok"></span>Basic email templates (10 templates)</li>
          <li><span class="ok"></span>Lead search & filtering</li>
          <li><span class="ok"></span>Basic analytics dashboard</li>
          <li><span class="ok"></span>Property photo management</li>
          <li><span class="ok"></span>Export to CSV</li>
          <li><span class="ok"></span>1 user account</li>
          <li><span class="ok"></span>Basic API access (1,000 calls/month)</li>
          <li><span class="ok"></span>Email support</li>
          <li><span class="limited"></span>Limited AI tools (10 analyses/month)</li>
          <li><span class="limited"></span>Basic automation (1 workflow, 5 campaigns/month)</li>
          <li><span class="limited"></span>Limited property data (25 lookups/month)</li>
          <li><span class="no"></span>Team collaboration</li>
          <li><span class="no"></span>Advanced analytics</li>
          <li><span class="no"></span>SMS messaging</li>
          <li><span class="no"></span>Market insights & property history</li>
          <li><span class="no"></span>White-label features</li>
        </ul>
        <button class="btn choose" onclick="selectPlanAndScroll('solo')">Reserve Solo Spot</button>
      </div>

      <!-- Team -->
      <div class="plan" style="border-color:rgba(255,255,255,.18); transform:translateY(-4px)">
        <span class="badge">Most Popular</span>
        <div class="pill">Team</div>
        <div class="price">
          <span class="regular-price" style="text-decoration:line-through; opacity:0.6; font-size:0.7em; display:none">$119</span>
          <span data-founders="$89" data-regular="$119" data-annual="$1068">$89</span>
          <small data-monthly="/mo" data-annual="/year">/mo</small>
        </div>
        <div style="text-align: center; margin-top: 8px;">
          <small style="color: var(--muted); font-size: 0.8rem;">
            Up to 5 users included<br>
            <span style="color: var(--brand);">+$12/month per additional user</span>
          </small>
        </div>
        <p class="muted">Perfect for growing teams. Maximum value for your investment.</p>
        <ul>
          <li><span class="ok"></span>Unlimited leads & prospects</li>
          <li><span class="ok"></span>Full AI-powered deal analysis & scoring</li>
          <li><span class="ok"></span>AI email template generation</li>
          <li><span class="ok"></span>Smart investor matching</li>
          <li><span class="ok"></span>Email automation (100 campaigns/month)</li>
          <li><span class="ok"></span>SMS messaging</li>
          <li><span class="ok"></span>Advanced pipeline (10 custom stages)</li>
          <li><span class="ok"></span>Team collaboration (up to 5 users included)</li>
          <li><span class="ok"></span>Task assignment & tracking</li>
          <li><span class="ok"></span>Advanced analytics & reports</li>
          <li><span class="ok"></span>Property photo & document management</li>
          <li><span class="ok"></span>Deal comparison tools</li>
          <li><span class="ok"></span>Performance tracking</li>
          <li><span class="ok"></span>Premium API access (15,000 calls/month)</li>
          <li><span class="ok"></span>Email support</li>
          <li><span class="ok"></span>Export to multiple formats</li>
          <li><span class="ok"></span>Property data access (200 lookups/month)</li>
          <li><span class="ok"></span>Market insights & property history</li>
          <li><span class="ok"></span>Comparative market analysis</li>
          <li><span class="limited"></span>Basic white-label options</li>
          <li><span class="no"></span>Zoning & tax records</li>
          <li><span class="no"></span>Unlimited property data</li>
        </ul>
        <button class="btn choose" onclick="selectPlanAndScroll('team')">Reserve Team Spot</button>
      </div>

      <!-- Business -->
      <div class="plan">
        <div class="pill">Business</div>
        <div class="price">
          <span class="regular-price" style="text-decoration:line-through; opacity:0.6; font-size:0.7em; display:none">$219</span>
          <span data-founders="$149" data-regular="$219" data-annual="$1788">$149</span>
          <small data-monthly="/mo" data-annual="/year">/mo</small>
        </div>
        <div style="text-align: center; margin-top: 8px;">
          <small style="color: var(--muted); font-size: 0.8rem;">
            Base price for 10 users<br>
            <span style="color: var(--brand);">+$15/month per additional user</span>
          </small>
        </div>
        <p class="muted">Professional teams and agencies. Scales with your business growth.</p>
        <ul>
          <li><span class="ok"></span>Everything in Team PLUS</li>
          <li><span class="ok"></span>Up to 10 users included (expandable)</li>
          <li><span class="ok"></span>Advanced AI suite & recommendations</li>
          <li><span class="ok"></span>Unlimited property data & lookups</li>
          <li><span class="ok"></span>Complete market & demographic data</li>
          <li><span class="ok"></span>Zoning, tax records & rental estimates</li>
          <li><span class="ok"></span>AI investment scoring & forecasting</li>
          <li><span class="ok"></span>Advanced role permissions & security</li>
          <li><span class="ok"></span>Custom analytics dashboards</li>
          <li><span class="ok"></span>Full white-label customization</li>
          <li><span class="ok"></span>Lead scoring algorithms</li>
          <li><span class="ok"></span>Advanced deal comparison & forecasting</li>
          <li><span class="ok"></span>Performance benchmarking</li>
          <li><span class="ok"></span>Team performance analytics</li>
          <li><span class="ok"></span>Enterprise API access (50,000 calls/month)</li>
          <li><span class="ok"></span>Premium support + dedicated success manager</li>
          <li><span class="ok"></span>Priority feature requests</li>
          <li><span class="ok"></span>Advanced training & onboarding</li>
          <li><span class="ok"></span>Enterprise security & compliance</li>
          <li><span class="ok"></span>Custom integrations available</li>
        </ul>
        <button class="btn choose" onclick="selectPlanAndScroll('business')">Reserve Business Spot</button>
      </div>
    </div>

    <!-- Seat-based pricing explanation -->
    <div style="margin-top: 32px; padding: 20px; background: rgba(124,92,255,0.05); border: 1px solid rgba(124,92,255,0.2); border-radius: 12px; text-align: center;">
      <h4 style="margin-bottom: 12px; color: var(--brand);">üí∫ Seat-Based Pricing</h4>
      <p style="color: var(--muted); font-size: 0.9rem; margin-bottom: 12px;">
        Each plan includes a base number of users. Need more seats? Add them for a small monthly fee:
      </p>
      <div style="display: flex; justify-content: center; gap: 32px; flex-wrap: wrap; font-size: 0.9rem;">
        <div>
          <strong style="color: var(--text);">Team Plan:</strong>
          <span style="color: var(--muted);">+$12/user beyond 5 users</span>
        </div>
        <div>
          <strong style="color: var(--text);">Business Plan:</strong>
          <span style="color: var(--muted);">+$15/user beyond 10 users</span>
        </div>
      </div>
      <p style="color: var(--muted); font-size: 0.8rem; margin-top: 12px;">
        <strong>Need 25+ users?</strong> <a href="mailto:sales@nxtrix.com" style="color: var(--brand);">Contact us</a> for volume pricing.
      </p>
    </div>
    <div id="pricing-note" style="margin-top:12px; text-align:center">
      <p class="muted founders-note">üéØ <strong>Founders pricing</strong>: Lock in these rates forever. Limited spots available.</p>
      <p class="muted regular-note" style="display:none">Regular monthly pricing. All plans include 7-day free trial.</p>
      <p class="muted annual-note" style="display:none">Annual pricing with up to 20% savings. Pay yearly, save more!</p>
    </div>
  </section>

  <section class="container" style="margin:80px auto">
    <div style="text-align:center; margin-bottom:48px">
      <h2>Frequently Asked Questions</h2>
      <p class="muted">Everything you need to know about NXTRIX CRM</p>
    </div>
    
    <div style="max-width:800px; margin:0 auto">
      <div class="faq-item">
        <h4 style="margin-bottom:8px; color:var(--text)">üöÄ When will NXTRIX be available?</h4>
        <p class="muted" style="margin-bottom:24px">We're launching in early 2025. Founders get early access 30 days before public release, plus lifetime pricing lock.</p>
      </div>
      
      <div class="faq-item">
        <h4 style="margin-bottom:8px; color:var(--text)">üí∞ Is founders pricing really locked forever?</h4>
        <p class="muted" style="margin-bottom:24px">Yes! Your founders rate is guaranteed for life. Even when we raise prices to $120/$150/$300+, you keep your founders pricing.</p>
      </div>
      
      <div class="faq-item">
        <h4 style="margin-bottom:8px; color:var(--text)">ü§ñ How advanced is the AI deal analysis?</h4>
        <p class="muted" style="margin-bottom:24px">Our AI analyzes 47+ data points including market comps, renovation costs, rental yields, and exit strategies. It's like having a senior analyst on every deal.</p>
      </div>
      
      <div class="faq-item">
        <h4 style="margin-bottom:8px; color:var(--text)">üì± Does it work on mobile?</h4>
        <p class="muted" style="margin-bottom:24px">Absolutely! Full mobile optimization with offline capabilities. Manage deals, contacts, and tasks from anywhere.</p>
      </div>
      
      <div class="faq-item">
        <h4 style="margin-bottom:8px; color:var(--text)">üîÑ Can I upgrade or downgrade plans?</h4>
        <p class="muted" style="margin-bottom:24px">Yes, change plans anytime. Founders pricing applies to any tier you choose - upgrade to Business and still pay founders rates.</p>
      </div>

      <div class="faq-item">
        <h4 style="margin-bottom:8px; color:var(--text)">üë• How does seat-based pricing work?</h4>
        <p class="muted" style="margin-bottom:24px">Each plan includes a base number of users. If your team grows, you can add more seats: Team +$12/user, Business +$15/user. Need 25+ users? Contact us for volume pricing.</p>
      </div>
      
      <div class="faq-item">
        <h4 style="margin-bottom:8px; color:var(--text)">üí≥ When do I get charged?</h4>
        <p class="muted" style="margin-bottom:24px">Not until launch! Joining the waitlist is 100% free. You'll get payment details 2 weeks before your early access begins.</p>
      </div>
    </div>
  </section>

  <section class="container" style="margin:44px auto;">
    <div class="grid-3">
      <div class="card">
        <h4>üî• Founders Benefits</h4>
        <p class="muted">Lock in these rates forever! No price increases, even when we hit regular pricing. Plus priority support & feature requests.</p>
      </div>
      <div class="card">
        <h4>üöÄ Production Ready</h4>
        <p class="muted">Built and tested with real investors. Advanced lead management, deal analysis, and AI-powered automation ready to scale your business.</p>
      </div>
      <div class="card">
        <h4>ÔøΩ Real Features</h4>
        <p class="muted">Every feature listed is built and working. No promises, just proven functionality including AI tools, automation, and advanced analytics.</p>
      </div>
    </div>
  </section>

  <section class="container" style="margin:80px auto; text-align:center">
    <h2 style="margin-bottom:16px">Join 847+ Real Estate Investors</h2>
    <p class="muted" style="margin-bottom:48px">Serious investors are already securing their founders pricing</p>
    
    <div class="grid-3">
      <div class="card" style="text-align:left">
        <div style="display:flex; align-items:center; margin-bottom:12px">
          <div style="width:40px; height:40px; background:linear-gradient(135deg,var(--brand),var(--brand-2)); border-radius:50%; display:flex; align-items:center; justify-content:center; margin-right:12px; font-weight:bold; color:white">MJ</div>
          <div>
            <div style="font-weight:600; color:var(--text)">Marcus Johnson</div>
            <div style="font-size:0.8rem; color:var(--muted)">Fix & Flip Investor</div>
          </div>
        </div>
        <p class="muted">"Finally, a CRM built specifically for real estate investors. The AI deal analysis alone is worth the subscription. Can't wait for launch!"</p>
      </div>
      
      <div class="card" style="text-align:left">
        <div style="display:flex; align-items:center; margin-bottom:12px">
          <div style="width:40px; height:40px; background:linear-gradient(135deg,var(--accent),var(--brand-2)); border-radius:50%; display:flex; align-items:center; justify-content:center; margin-right:12px; font-weight:bold; color:white">SR</div>
          <div>
            <div style="font-weight:600; color:var(--text)">Sarah Rodriguez</div>
            <div style="font-size:0.8rem; color:var(--muted)">Wholesaling Team</div>
          </div>
        </div>
        <p class="muted">"We've tried every CRM. None understood real estate like this. The investor matching feature is going to be a game-changer for our business."</p>
      </div>
      
      <div class="card" style="text-align:left">
        <div style="display:flex; align-items:center; margin-bottom:12px">
          <div style="width:40px; height:40px; background:linear-gradient(135deg,var(--warning),var(--error)); border-radius:50%; display:flex; align-items:center; justify-content:center; margin-right:12px; font-weight:bold; color:white">DK</div>
          <div>
            <div style="font-weight:600; color:var(--text)">David Kim</div>
            <div style="font-size:0.8rem; color:var(--muted)">Buy & Hold Portfolio</div>
          </div>
        </div>
        <p class="muted">"Founders pricing was a no-brainer. This level of automation and AI analysis typically costs $500+/month. Locked in at $149!"</p>
      </div>
    </div>
    
    <div style="margin-top:48px; padding:24px; background:var(--surface); border-radius:12px; border:1px solid var(--border)">
      <div style="display:flex; justify-content:center; gap:48px; flex-wrap:wrap">
        <div style="text-align:center">
          <div style="font-size:2rem; font-weight:700; color:var(--brand)">847+</div>
          <div style="font-size:0.9rem; color:var(--muted)">Investors Waiting</div>
        </div>
        <div style="text-align:center">
          <div style="font-size:2rem; font-weight:700; color:var(--brand-2)">23</div>
          <div style="font-size:0.9rem; color:var(--muted)">Spots Remaining</div>
        </div>
        <div style="text-align:center">
          <div style="font-size:2rem; font-weight:700; color:var(--accent)">$2.3M</div>
          <div style="font-size:0.9rem; color:var(--muted)">Deals Analyzed (Beta)</div>
        </div>
      </div>
    </div>
  </section>

  <footer class="container">
      </div>
    </div>
  </section>

  <section class="container" style="margin:44px auto;">
    <h3 style="margin:0 0 12px;">FAQ</h3>
    <div class="grid-3">
      <details class="card"><summary>When will I be charged?</summary><p class="muted">At launch. Pre-launch signups are not charged. We'll email you before billing.</p></details>
      <details class="card"><summary>Can I switch plans later?</summary><p class="muted">Yes. Upgrades take effect immediately; downgrades apply next cycle.</p></details>
      <details class="card"><summary>Do you offer trials?</summary><p class="muted">We plan a 7-day trial on Team. Join the waitlist to get notified.</p></details>
    </div>
  </section>

  <footer class="container">
    ¬© <span id="yy"></span> NXTRIX ‚Ä¢ All rights reserved ‚Ä¢ <a href="privacy.html">Privacy</a> ‚Ä¢ <a href="terms.html">Terms</a>
  </footer>
  
  <!-- Sticky Notification -->
  <div id="sticky-notification" class="sticky-notification">
    <span class="close" onclick="hideNotification()">√ó</span>
    <h4>‚è∞ Limited Time: Founders Pricing</h4>
    <p>Only <strong>23 spots left</strong> at this price. Lock in lifetime savings now!</p>
  </div>

  <script>
    // Global pricing state
    let currentPricing = 'founders';

    // Pricing toggle
    const prices = () => document.querySelectorAll('.price span[data-founders]');
    
    function setPricing(mode){
      currentPricing = mode;
      const foundersBtn = document.getElementById('foundersToggle');
      const annualBtn = document.getElementById('annualToggle');
      
      // Reset all buttons
      if (foundersBtn) {
        foundersBtn.classList.remove('active'); 
        foundersBtn.setAttribute('aria-selected','false');
      }
      if (annualBtn) {
        annualBtn.classList.remove('active'); 
        annualBtn.setAttribute('aria-selected','false');
      }
      
      // Activate selected button
      if(mode === 'annual'){
        if (annualBtn) {
          annualBtn.classList.add('active'); 
          annualBtn.setAttribute('aria-selected','true');
        }
      } else {
        // Default to founders (monthly)
        if (foundersBtn) {
          foundersBtn.classList.add('active'); 
          foundersBtn.setAttribute('aria-selected','true');
        }
      }
      
      // Show/hide pricing notes
      const foundersNote = document.querySelector('.founders-note');
      const annualNote = document.querySelector('.annual-note');
      
      if (foundersNote) foundersNote.style.display = mode === 'annual' ? 'none' : 'block';
      if (annualNote) annualNote.style.display = mode === 'annual' ? 'block' : 'none';
      
      // Show/hide strikethrough prices (always show for founders pricing)
      document.querySelectorAll('.regular-price').forEach(el => {
        el.style.display = 'inline';
      });
      
      updatePricing();
    }

    function updatePricing(){
      const dataKey = `data-${currentPricing}`;
      
      prices().forEach(priceSpan => {
        const newPrice = priceSpan.getAttribute(dataKey);
        if(newPrice) priceSpan.textContent = newPrice;
      });
      
      // Update period text (mo/year)
      document.querySelectorAll('small[data-monthly]').forEach(periodSpan => {
        if (currentPricing === 'annual') {
          periodSpan.textContent = periodSpan.getAttribute('data-annual') || '/year';
        } else {
          periodSpan.textContent = periodSpan.getAttribute('data-monthly') || '/mo';
        }
      });
    }

    // Supabase client (connects founders to main CRM database)
    const sb = supabase.createClient(
      'https://ucrtaeoocwymzlykxgrf.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVjcnRhZW9vY3d5bXpseWt4Z3JmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQwNzM4MTIsImV4cCI6MjA2OTY0OTgxMn0.ZNjBkcR8vw00wmDcSYh-b1KdIel5233euuCToX-9-Lk'
    );

    // EmailJS configuration for notifications
    if (typeof emailjs !== 'undefined') {
      emailjs.init("cAvlcms2_FGEaSNQg"); // Your EmailJS public key
    } else {
      console.warn('EmailJS not loaded - notifications will not work');
    }
    
    // Email templates
    const sendWelcomeEmail = async (signup) => {
      try {
        await emailjs.send(
          "service_nxtrix", // Your EmailJS service ID
          "template_user", // Your EmailJS user template ID
          {
            to_email: signup.email,
            to_name: signup.name,
            plan: signup.plan,
            investor_type: signup.investor_type,
            subject: `üéâ Your NXTRIX CRM Spot is Reserved! (${signup.plan})`,
            message: `Welcome to NXTRIX! Your ${signup.plan} spot is reserved. We'll notify you 30 days before launch with early access and payment details.`,
            html_content: `
              <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #0b0d12; color: #e5e7eb;">
                <div style="background: linear-gradient(135deg, #7c5cff, #24d1ff); padding: 20px; text-align: center;">
                  <h1 style="color: white; margin: 0; font-size: 24px;">üéâ Welcome to NXTRIX CRM!</h1>
                </div>
                <div style="padding: 30px; background: #1a1b23;">
                  <h2 style="color: #7c5cff; margin-bottom: 20px;">Your Spot is Reserved!</h2>
                  <p style="margin-bottom: 15px;">Hi <strong>${signup.name}</strong>,</p>
                  <p style="margin-bottom: 20px;">You're officially on the NXTRIX CRM waitlist for <strong style="color: #24d1ff;">${signup.plan}</strong>.</p>
                  
                  <div style="background: rgba(124, 92, 255, 0.1); border: 1px solid #7c5cff; border-radius: 8px; padding: 20px; margin: 20px 0;">
                    <h3 style="color: #7c5cff; margin-top: 0;">üéâ Payment Successful!</h3>
                    <ul style="margin: 0; padding-left: 20px;">
                      <li style="margin-bottom: 8px;">Your account is being set up</li>
                      <li style="margin-bottom: 8px;">You'll receive login details within 24 hours</li>
                      <li style="margin-bottom: 8px;">Founders pricing locked in forever</li>
                      <li>Priority onboarding assistance included</li>
                    </ul>
                  </div>
                  
                  <div style="text-align: center; margin: 30px 0;">
                    <a href="http://localhost:8000" style="background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; font-weight: bold; display: inline-block;">ÔøΩ Visit Dashboard</a>
                  </div>
                  
                  <p style="margin-bottom: 15px; color: #9ca3af; font-size: 14px;">
                    <strong>Investor Type:</strong> ${signup.investor_type}<br>
                    <strong>Reserved:</strong> ${new Date().toLocaleDateString()}
                  </p>
                  
                  <p style="color: #9ca3af; font-size: 12px; margin-top: 30px; border-top: 1px solid #374151; padding-top: 20px;">
                    Questions? Reply to this email or contact us at support@nxtrix.com
                  </p>
                </div>
              </div>
            `
          }
        );
        console.log('Welcome email sent successfully');
      } catch (error) {
        console.error('Welcome email failed:', error);
      }
    };
    
    const sendAdminNotification = async (signup) => {
      try {
        await emailjs.send(
          "service_nxtrix", // Your EmailJS service ID  
          "template_admin", // Your EmailJS admin template ID
          {
            to_email: "mxtrixwelcome@gmail.com", // Your email for notifications
            subject: `üéØ New NXTRIX Signup: ${signup.name} (${signup.plan})`,
            signup_name: signup.name,
            signup_email: signup.email, 
            signup_plan: signup.plan,
            signup_type: signup.investor_type,
            signup_notes: signup.notes || 'No notes provided',
            signup_time: new Date().toLocaleString(),
            html_content: `
              <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f9fafb; color: #1f2937;">
                <div style="background: #7c5cff; padding: 20px; text-align: center;">
                  <h1 style="color: white; margin: 0; font-size: 24px;">üéØ New NXTRIX Signup!</h1>
                </div>
                <div style="padding: 30px; background: white;">
                  <h2 style="color: #7c5cff; margin-bottom: 20px;">New Waitlist Registration</h2>
                  
                  <div style="background: #f3f4f6; border-radius: 8px; padding: 20px; margin: 20px 0;">
                    <table style="width: 100%; border-collapse: collapse;">
                      <tr>
                        <td style="padding: 8px 0; font-weight: bold; color: #374151; width: 120px;">Name:</td>
                        <td style="padding: 8px 0; color: #1f2937;">${signup.name}</td>
                      </tr>
                      <tr>
                        <td style="padding: 8px 0; font-weight: bold; color: #374151;">Email:</td>
                        <td style="padding: 8px 0; color: #1f2937;">${signup.email}</td>
                      </tr>
                      <tr>
                        <td style="padding: 8px 0; font-weight: bold; color: #374151;">Plan:</td>
                        <td style="padding: 8px 0; color: #7c5cff; font-weight: bold;">${signup.plan}</td>
                      </tr>
                      <tr>
                        <td style="padding: 8px 0; font-weight: bold; color: #374151;">Type:</td>
                        <td style="padding: 8px 0; color: #1f2937;">${signup.investor_type}</td>
                      </tr>
                      <tr>
                        <td style="padding: 8px 0; font-weight: bold; color: #374151;">Time:</td>
                        <td style="padding: 8px 0; color: #1f2937;">${new Date().toLocaleString()}</td>
                      </tr>
                    </table>
                  </div>
                  
                  ${signup.notes ? `
                    <div style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 8px; padding: 15px; margin: 20px 0;">
                      <h4 style="color: #92400e; margin: 0 0 10px 0;">Notes:</h4>
                      <p style="color: #92400e; margin: 0;">${signup.notes}</p>
                    </div>
                  ` : ''}
                  
                  <div style="text-align: center; margin: 30px 0;">
                    <a href="http://localhost:8000" style="background: #10b981; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: bold; display: inline-block; margin-right: 10px;">üìä View Landing Page</a>
                    <a href="mailto:${signup.email}" style="background: #3b82f6; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: bold; display: inline-block;">üìß Email ${signup.name}</a>
                  </div>
                  
                  <p style="color: #6b7280; font-size: 12px; margin-top: 30px; border-top: 1px solid #e5e7eb; padding-top: 20px; text-align: center;">
                    NXTRIX CRM Admin Notification | ${new Date().toLocaleDateString()}
                  </p>
                </div>
              </div>
            `
          }
        );
        console.log('Admin notification sent successfully');
      } catch (error) {
        console.error('Admin notification failed:', error);
      }
    };

    // Enhanced signup state
    let selectedPlan = 'team';
    let billingMode = 'monthly';
    
    // Enhanced signup functions
    function setBillingMode(mode) {
      billingMode = mode;
      
      // Update button states
      const monthlyBtn = document.getElementById('monthlyPlan');
      const annualBtn = document.getElementById('annualPlan');
      
      monthlyBtn.classList.toggle('active', mode === 'monthly');
      annualBtn.classList.toggle('active', mode === 'annual');
      
      // Update explanation text
      const monthlyExplanation = document.querySelector('.monthly-explanation');
      const annualExplanation = document.querySelector('.annual-explanation');
      
      if (mode === 'monthly') {
        monthlyExplanation.style.display = 'block';
        annualExplanation.style.display = 'none';
      } else {
        monthlyExplanation.style.display = 'none';
        annualExplanation.style.display = 'block';
      }
      
      updateOrderSummary();
    }
    
    function selectPlan(plan) {
      selectedPlan = plan;
      
      // Extract plan type and billing from the new format
      if (plan.includes('-monthly')) {
        const planType = plan.replace('-monthly', '');
        selectedPlan = planType;
        billingMode = 'monthly';
        setBillingMode('monthly');
      } else if (plan.includes('-annual')) {
        const planType = plan.replace('-annual', '');
        selectedPlan = planType;
        billingMode = 'annual';
        setBillingMode('annual');
      } else {
        // Fallback for old format
        selectedPlan = plan;
      }
      
      updateOrderSummary();
    }
    
    function updateOrderSummary() {
      const plans = {
        solo: { name: 'Solo', monthly: 59 },
        team: { name: 'Team', monthly: 89 },
        business: { name: 'Business', monthly: 149 }
      };
      
      const regularPrices = {
        solo: { monthly: 79 },
        team: { monthly: 119 },  
        business: { monthly: 219 }
      };
      
      const plan = plans[selectedPlan];
      const regularPlan = regularPrices[selectedPlan];
      
      let price, period, savings;
      
      if (billingMode === 'monthly') {
        price = plan.monthly;
        period = '/month';
        savings = regularPlan.monthly - plan.monthly;
      } else {
        // Annual = monthly price * 12
        price = plan.monthly * 12;
        period = '/year';
        savings = (regularPlan.monthly - plan.monthly) * 12;
      }
      
      // Update pricing display
      document.getElementById('monthlyPlanName').textContent = plan.name;
      document.getElementById('annualPlanName').textContent = plan.name;
      document.getElementById('monthlyAmount').textContent = plan.monthly;
      document.getElementById('annualAmount').textContent = plan.monthly * 12;
      document.getElementById('savingsAmount').textContent = regularPlan.monthly - plan.monthly;
      
      // Update button text
      if (billingMode === 'annual') {
        document.querySelector('.btn-text').textContent = `üîí Secure My Spot Now - $${price}/year`;
        document.querySelector('.btn-subtext').textContent = `One-time annual payment`;
      } else {
        document.querySelector('.btn-text').textContent = `üîí Secure My Spot Now - $${price}/month`;
        document.querySelector('.btn-subtext').textContent = `Monthly billing - cancel anytime`;
      }
    }
    // Simple plan selection function
    function selectPlanAndScroll(planType) {
      // Set the plan in the form
      const planSelect = document.getElementById('plan');
      if (planSelect) {
        // Update the select to show the chosen plan
        planSelect.value = `${planType}-monthly`;
        selectPlan(`${planType}-monthly`);
      }
      
      // Scroll to the form
      document.getElementById('enhancedSignup').scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
      
      // Focus on the name field
      setTimeout(() => {
        document.getElementById('name').focus();
      }, 500);
    }
    
    // Enhanced form submission - Simple SaaS flow
    async function submitEnhancedSignup(e) {
      e.preventDefault();
      
      console.log('üöÄ FORM SUBMITTED - Starting enhanced signup flow...');
      console.log('üéØ This should go: Save data ‚Üí Stripe checkout ‚Üí Success');
      
      const btn = document.getElementById('secureCheckoutBtn');
      const originalHTML = btn.innerHTML;
      
      // Update button to loading state
      btn.disabled = true;
      btn.innerHTML = '<span class="btn-text">üîÑ Saving your information...</span><span class="btn-subtext">Next: Payment setup</span>';
      
      try {
        // Collect form data
        const formData = new FormData(e.target);
        const selectedPlan = formData.get('plan');
        
        // Parse plan details
        let planType = 'team', billingType = 'monthly';
        if (selectedPlan && selectedPlan.includes('-')) {
          [planType, billingType] = selectedPlan.split('-');
        }
        
        const signupData = {
          name: formData.get('name'),
          email: formData.get('email'),
          company: formData.get('company') || '',
          investor_type: formData.get('type'),
          experience: formData.get('experience') || '',
          notes: formData.get('notes') || '',
          tier: planType,
          billing: billingType,
          timestamp: new Date().toISOString()
        };
        
        console.log('üöÄ Submitting founders signup:', signupData);
        
        // Step 1: Save to Supabase via Netlify Functions
        const response = await fetch(CONFIG.getApiUrl('/founders-signup'), {
          method: 'POST',
          headers: { 
            'Content-Type': 'application/json',
            'Origin': window.location.origin
          },
          mode: 'cors',
          credentials: 'omit',
          body: JSON.stringify({
            tier: signupData.tier,
            billing: signupData.billing,
            customer_email: signupData.email,
            name: signupData.name,
            company: signupData.company,
            investor_type: signupData.investor_type,
            experience: signupData.experience,
            notes: signupData.notes
          })
        });
        
        if (!response.ok) {
          const errorData = await response.json();
          throw new Error(errorData.error || 'Failed to save signup data');
        }
        
        const result = await response.json();
        console.log('‚úÖ Signup saved to database:', result);
        
        // Check if there's a redirect_url that might be causing issues
        if (result.redirect_url) {
          console.log('‚ö†Ô∏è API returned redirect_url, but continuing to Stripe instead:', result.redirect_url);
        }
        
        // Step 2: Create Stripe checkout session
        console.log('‚úÖ Signup saved, creating Stripe checkout...');
        
        btn.innerHTML = '<span class="btn-text">üîÑ Setting up payment...</span><span class="btn-subtext">Redirecting to secure checkout</span>';
        
        const stripeResponse = await fetch(CONFIG.getApiUrl('/create-checkout-session'), {
          method: 'POST',
          headers: { 
            'Content-Type': 'application/json',
            'Origin': window.location.origin
          },
          mode: 'cors',
          credentials: 'omit',
          body: JSON.stringify({
            customer_email: signupData.email,
            customer_name: signupData.name,
            tier: signupData.tier,
            billing: signupData.billing,
            company: signupData.company,
            success_url: `${window.location.origin}/success.html?founders=true&plan=${signupData.tier}&email=${encodeURIComponent(signupData.email)}`,
            cancel_url: `${window.location.origin}/index.html?cancelled=true&plan=${signupData.tier}`
          })
        });
        
        if (!stripeResponse.ok) {
          const stripeError = await stripeResponse.json();
          console.error('‚ùå Stripe API Error:', stripeError);
          throw new Error(stripeError.error || 'Failed to create payment setup');
        }
        
        const stripeResult = await stripeResponse.json();
        console.log('‚úÖ Stripe checkout created:', stripeResult);
        
        if (stripeResult.url) {
          // Redirect to Stripe checkout
          console.log('üîÑ Redirecting to Stripe checkout...');
          console.log('üîó Stripe URL:', stripeResult.url);
          window.location.href = stripeResult.url;
        } else {
          console.error('‚ùå No URL in Stripe response:', stripeResult);
          throw new Error('No checkout URL received from Stripe');
        }
        
      } catch (error) {
        console.error('‚ùå Signup error:', error);
        alert('Error processing signup: ' + error.message + '. Please try again or contact support.');
        
        // Reset button
        btn.disabled = false;
        btn.innerHTML = originalHTML;
      }
    }
    
    // Initialize enhanced signup
    document.addEventListener('DOMContentLoaded', function() {
      // Set default selections
      selectPlan('team-monthly');
      setBillingMode('monthly');
      
      // Handle payment cancellation
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.get('cancelled') === 'true') {
        const plan = urlParams.get('plan') || 'team';
        showNotification('Payment cancelled', `No worries! Your ${plan} plan information has been saved. You can complete payment anytime before launch.`, 'info');
        
        // Clean up URL
        window.history.replaceState({}, document.title, window.location.pathname);
      }
    });

    // Waitlist form submission
    async function submitWaitlist(e){
      e.preventDefault();
      const msg = document.getElementById('wl-msg');
      const btn = e.target.querySelector('button[type="submit"]');
      msg.textContent = '';
      btn.disabled = true; btn.textContent = 'Submitting...';

      const signup = {
        name: document.getElementById('name').value.trim(),
        email: document.getElementById('email').value.trim(),
        plan: document.getElementById('plan').value,
        investor_type: document.getElementById('type').value,
        notes: document.getElementById('notes').value.trim(),
        consent: document.getElementById('consent').checked
      };

      // Validation
      if (!signup.name || !signup.email || !signup.consent) {
        msg.textContent = 'Please complete required fields.';
        btn.disabled = false; btn.textContent = 'Reserve My Spot';
        return false;
      }

      try {
        // Save to Supabase database (connects founders to main CRM)
        console.log('Saving founders signup to database:', signup);
        const { data, error } = await sb.from('waitlist').insert(signup);
        
        if (error) {
          console.warn('Database error:', error.message);
          
          // Handle duplicate entries (not an error - user already signed up)
          if (error.message.toLowerCase().includes('duplicate')) {
            console.log('User already on waitlist, proceeding with confirmation');
          } 
          // Handle other database errors gracefully
          else {
            console.error('Database save failed:', error);
            // Continue anyway - EmailJS will capture the data
          }
        } else {
          console.log('‚úÖ Successfully saved to database:', data);
        }

        // Success message
        msg.style.color = '#10b981';
        msg.textContent = `üéâ Reserved! Check your email for next steps, ${signup.name.split(' ')[0]}.`;
        btn.textContent = 'Spot Reserved!';
        
        // Send email notifications (backup data collection + user confirmation)
        await sendWelcomeEmail(signup);
        await sendAdminNotification(signup);
        
        // Clear form
        e.target.reset();
        
        // Log for tracking
        console.log('New NXTRIX founders signup completed:', signup);
        
      } catch (error) {
        console.error('Submission error:', error);
        msg.textContent = 'Connection error. Please try again.';
        btn.disabled = false; btn.textContent = 'Reserve My Spot';
      }
    }

    // Set current year
    document.getElementById('yy').textContent = new Date().getFullYear();
    
    // Show sticky notification after 30 seconds
    setTimeout(() => {
      if (!localStorage.getItem('notification-hidden')) {
        document.getElementById('sticky-notification').classList.add('show');
      }
    }, 30000);
    
    // Hide notification function
    function hideNotification() {
      document.getElementById('sticky-notification').classList.remove('show');
      localStorage.setItem('notification-hidden', 'true');
    }
  </script>
</body>
</html>